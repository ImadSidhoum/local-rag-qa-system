# -----------------------------------------------------------------------------
# Ports exposed on host
# -----------------------------------------------------------------------------
BACKEND_PORT=8000
FRONTEND_PORT=5173
OLLAMA_PORT=11434
LANGFUSE_PORT=3000

# -----------------------------------------------------------------------------
# Backend (FastAPI / RAG)
# -----------------------------------------------------------------------------
APP_NAME=local-rag-qa
APP_ENV=docker
APP_HOST=0.0.0.0
APP_PORT=8000
LOG_LEVEL=INFO

DATA_DIR=/app/data
CORPUS_DIR=/app/data/corpus
CHROMA_DIR=/app/data/chroma
INDEX_MANIFEST_PATH=/app/data/index_manifest.json
CHROMA_ANONYMIZED_TELEMETRY=false

EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
BATCH_SIZE=32
CHUNK_SIZE=900
CHUNK_OVERLAP=150
TOP_K=4
USE_MMR=false
MMR_CANDIDATES=12
MMR_LAMBDA=0.6
MIN_SIMILARITY=0.2

OLLAMA_BASE_URL=http://ollama:11434
OLLAMA_MODEL=llama3.2:1b
OLLAMA_FALLBACK_MODEL=llama3.2:1b
OLLAMA_TIMEOUT_SECONDS=240
OLLAMA_AUTO_PULL=true
GEN_TEMPERATURE=0.1
GEN_MAX_TOKENS=450
QUERY_REWRITE_ENABLED=true
QUERY_REWRITE_MAX_TOKENS=96
MEMORY_ENABLED=true
MEMORY_MAX_TURNS=6

LANGFUSE_ENABLED=false
LANGFUSE_HOST=http://langfuse-web:3000
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=

RANDOM_SEED=42

# -----------------------------------------------------------------------------
# Frontend (Vite)
# -----------------------------------------------------------------------------
VITE_BACKEND_URL=http://localhost:8000

# -----------------------------------------------------------------------------
# Langfuse self-hosted stack
# -----------------------------------------------------------------------------
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=postgres
TZ=UTC
PGTZ=UTC

CLICKHOUSE_DB=default
CLICKHOUSE_USER=clickhouse
CLICKHOUSE_PASSWORD=clickhouse

MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=miniosecret

REDIS_AUTH=myredissecret

NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=mysecret
DATABASE_URL=postgresql://postgres:postgres@langfuse-postgres:5432/postgres
SALT=mysalt
ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000
TELEMETRY_ENABLED=false

CLICKHOUSE_MIGRATION_URL=clickhouse://clickhouse:clickhouse@langfuse-clickhouse:9000
CLICKHOUSE_URL=http://langfuse-clickhouse:8123
CLICKHOUSE_CLUSTER_ENABLED=false

REDIS_HOST=langfuse-redis
REDIS_PORT=6379
REDIS_TLS_ENABLED=false

LANGFUSE_S3_EVENT_UPLOAD_BUCKET=langfuse
LANGFUSE_S3_EVENT_UPLOAD_REGION=auto
LANGFUSE_S3_EVENT_UPLOAD_ACCESS_KEY_ID=minio
LANGFUSE_S3_EVENT_UPLOAD_SECRET_ACCESS_KEY=miniosecret
LANGFUSE_S3_EVENT_UPLOAD_ENDPOINT=http://langfuse-minio:9000
LANGFUSE_S3_EVENT_UPLOAD_FORCE_PATH_STYLE=true
LANGFUSE_S3_EVENT_UPLOAD_PREFIX=events/

LANGFUSE_S3_MEDIA_UPLOAD_BUCKET=langfuse
LANGFUSE_S3_MEDIA_UPLOAD_REGION=auto
LANGFUSE_S3_MEDIA_UPLOAD_ACCESS_KEY_ID=minio
LANGFUSE_S3_MEDIA_UPLOAD_SECRET_ACCESS_KEY=miniosecret
LANGFUSE_S3_MEDIA_UPLOAD_ENDPOINT=http://langfuse-minio:9000
LANGFUSE_S3_MEDIA_UPLOAD_FORCE_PATH_STYLE=true
LANGFUSE_S3_MEDIA_UPLOAD_PREFIX=media/

# Optional one-time bootstrap (leave empty if not used)
LANGFUSE_INIT_ORG_ID=
LANGFUSE_INIT_ORG_NAME=
LANGFUSE_INIT_PROJECT_ID=
LANGFUSE_INIT_PROJECT_NAME=
LANGFUSE_INIT_PROJECT_PUBLIC_KEY=
LANGFUSE_INIT_PROJECT_SECRET_KEY=
LANGFUSE_INIT_USER_EMAIL=
LANGFUSE_INIT_USER_NAME=
LANGFUSE_INIT_USER_PASSWORD=
